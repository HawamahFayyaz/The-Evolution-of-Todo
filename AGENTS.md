# AGENTS.md

## Purpose
This project uses **Spec-Driven Development (SDD)** - no agent writes code until specifications are complete and approved.

All AI agents (Claude, Copilot, Gemini) must follow: **Specify → Plan → Tasks → Implement**

## Rules for All Agents

1. **Never generate code without a referenced Task ID**
2. **Never modify architecture without updating speckit.plan**
3. **Never propose features without updating speckit.specify**
4. **Never change principles without updating speckit.constitution**
5. **Every code file must reference the Task and Spec it implements**

If an agent cannot find the required spec, it must STOP and request it, not improvise.

## Spec-Kit Workflow (Source of Truth)

### 1. Constitution (WHY - Principles & Constraints)
File: `specs/constitution.md`
Defines project values, tech stack, patterns, constraints.

### 2. Specify (WHAT - Requirements)
File: `specs/*.md`, `specs/features/*.md`
Contains user stories, acceptance criteria, requirements.

### 3. Plan (HOW - Architecture)
File: `specs/plan.md`
Component breakdown, APIs, system design.

### 4. Tasks (BREAKDOWN - Atomic Work)
File: Generated by SpecKitPlus
Each task has ID, description, acceptance criteria.

### 5. Implement (CODE)
Agents write code ONLY for authorized tasks.

## Agent Behavior

When generating code, reference:
```
[From]: speckit.specify §2.1, speckit.plan §3.4
```

When proposing architecture changes:
```
Update required in speckit.plan → add component X
```

When proposing new features:
```
Requires update in speckit.specify (WHAT)
```

## Agent Failure Modes (AVOID)

Agents must NOT:
- Freestyle code without specs
- Generate missing requirements
- Create tasks independently
- Ignore acceptance criteria
- Add features not in specs

## Project Structure (Phase I)
```
hackathon-todo/
├── .claude/
│   ├── agents/         # 6 specialist agents
│   ├── skills/         # 14 reusable tools
│   ├── blueprints/     # 3 K8s templates
│   └── commands/       # SpecKitPlus commands
├── specs/
│   ├── constitution.md
│   ├── overview.md
│   ├── features/
│   └── database/
├── src/                # Python source code
│   ├── main.py
│   ├── models.py
│   ├── storage.py
│   └── commands.py
├── tests/
├── AGENTS.md           # This file
├── CLAUDE.md           # Points to this file
├── README.md
└── pyproject.toml
```

## Available Custom Agents

You have access to specialized agents in `.claude/agents/`:
- **spec-architect**: Reviews specs for completeness
- **fullstack-architect**: Coordinates frontend/backend (Phase II+)
- **ai-integration-specialist**: OpenAI/MCP expert (Phase III+)
- **kubernetes-engineer**: K8s deployment (Phase IV+)
- **nextjs-app-builder**: Next.js patterns (Phase II+)
- **auth-security-expert**: JWT/Better Auth (Phase II+)

## Available Custom Skills

Reusable tools in `.claude/skills/`:
- **spec-writer**: Generate feature specs
- **api-spec-generator**: REST endpoint specs
- **database-schema**: Database design
- **mcp-tool-builder**: MCP tools (Phase III+)
- **better-auth-integrator**: Authentication (Phase II+)
- **dockerfile-generator**: Containerization (Phase IV+)
- **helm-chart-builder**: K8s packaging (Phase IV+)
- And 7 more...

## How to Use Custom Agents/Skills

To invoke an agent:
```
@.claude/agents/spec-architect.md review my spec at @specs/features/task-crud.md
```

To invoke a skill:
```
@.claude/skills/spec-writer/spec-writer.md generate a spec for user authentication
```

## Workflow Example

1. Human writes spec: "I need a login feature"
2. Human: `@.claude/skills/spec-writer/spec-writer.md create authentication spec`
3. Claude generates spec in specs/features/authentication.md
4. Human: `@.claude/agents/spec-architect.md review @specs/features/authentication.md`
5. Spec-architect reviews, suggests improvements
6. Human: `/sp.plan` (SpecKitPlus generates plan)
7. Human: `/sp.tasks` (SpecKitPlus generates tasks)
8. Human: `/sp.implement` (SpecKitPlus generates code)

## SpecKitPlus Integration

This project uses SpecKitPlus commands:
- `/sp.constitution` - Create/update constitution
- `/sp.specify` - Create specifications
- `/sp.plan` - Generate implementation plan
- `/sp.tasks` - Break plan into tasks
- `/sp.implement` - Generate code from tasks

These commands are available when SpecKitPlus is initialized.

## Key Principle

**The spec is the single source of truth.** Code that doesn't match the spec is wrong, even if it works.

Hierarchy: **Constitution > Specify > Plan > Tasks > Code**