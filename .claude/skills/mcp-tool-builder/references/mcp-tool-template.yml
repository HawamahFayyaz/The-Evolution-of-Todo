# MCP Tool Template Reference

tool_structure:
  description: "Standard MCP tool definition"
  example: |
    from mcp.server import Tool

    tool_name = Tool(
        name="tool_name",
        description="Clear description with natural language triggers",
        inputSchema={
            "type": "object",
            "properties": {
                "user_id": {
                    "type": "string",
                    "description": "Always required for multi-user"
                },
                "param": {
                    "type": "string",
                    "description": "Parameter description"
                }
            },
            "required": ["user_id", "param"]
        }
    )

tool_handler:
  description: "Stateless handler with database persistence"
  example: |
    @server.tool(tool_name)
    async def handle_tool(user_id: str, param: str):
        try:
            with get_session() as session:
                # Database operations here
                result = session.exec(...)

                return {
                    "success": True,
                    "data": result,
                    "message": "User-friendly message"
                }
        except Exception as e:
            return {
                "success": False,
                "error": str(e),
                "error_code": "ERROR_CODE"
            }

natural_language_triggers:
  description: "Document in tool description"
  example: |
    description: """Tool purpose.

    Use this when user says:
    - "Add [item]"
    - "Create a [item]"
    - "I need to [action]"
    """

response_format:
  success_response:
    success: true
    data: "Relevant data"
    message: "User-friendly confirmation"

  error_response:
    success: false
    error: "Human-readable error"
    error_code: "MACHINE_READABLE_CODE"

required_parameters:
  user_id:
    type: "string"
    required: true
    reason: "Every tool must filter by user for multi-user apps"

common_error_codes:
  - "USER_NOT_FOUND: Invalid user_id"
  - "TASK_NOT_FOUND: Resource doesn't exist"
  - "UNAUTHORIZED: User doesn't own resource"
  - "VALIDATION_ERROR: Invalid input"
  - "INTERNAL_ERROR: System error"

stateless_checklist:
  - "✅ No global variables storing state"
  - "✅ All data persisted to database"
  - "✅ Tools work after server restart"
  - "✅ No in-memory caches"
  - "✅ Each request is independent"
